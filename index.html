<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Montagem de PC - Or√ßamento</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        .component-card {
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #1f2937 0%, #374151 100%);
        }
        .component-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.4);
            background: linear-gradient(135deg, #374151 0%, #4b5563 100%);
        }
        .selected {
            border: 3px solid #10b981;
            background: linear-gradient(135deg, #065f46 0%, #047857 100%);
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
        }
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
        .progress-bar {
            transition: width 0.3s ease;
            background: linear-gradient(90deg, #10b981, #34d399);
        }
        .product-image {
            width: 100%;
            height: 150px;
            object-fit: contain;
            border-radius: 8px;
            background: #f8f9fa;
            padding: 8px;
        }
        .image-placeholder {
            width: 100%;
            height: 150px;
            background: linear-gradient(135deg, #4b5563, #6b7280);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #9ca3af;
            font-size: 2rem;
        }
        .admin-card {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            border: 1px solid #475569;
        }
        .admin-card:hover {
            background: linear-gradient(135deg, #334155 0%, #475569 100%);
        }
        .btn-gradient {
            background: linear-gradient(135deg, #10b981, #34d399);
        }
        .btn-gradient:hover {
            background: linear-gradient(135deg, #059669, #10b981);
        }
        .category-header {
            background: linear-gradient(135deg, #1e40af, #3b82f6);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .banner-container {
            position: relative;
            margin-bottom: 2rem;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 255, 255, 0.3);
        }
        
        .banner-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            filter: brightness(0.7);
        }
        
        .banner-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }
        
        .site-logo {
            height: 60px;
            width: auto;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 255, 255, 0.3);
        }
        
        .cable {
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .cable:hover {
            transform: scale(1.1);
            z-index: 20;
        }
        
        .cable.dragging {
            transform: scale(1.2);
            z-index: 30;
            opacity: 0.8;
        }
        
        .connection-point {
            transition: all 0.3s ease;
        }
        
        .connection-point.highlight {
            transform: scale(1.2);
            box-shadow: 0 0 20px rgba(255, 255, 0, 0.8);
        }
        
        .connection-point.connected {
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.8);
        }
        
        .cable.connected {
            opacity: 0.7;
            pointer-events: none;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white min-h-screen">
    <!-- Header -->
    <header class="bg-gradient-to-r from-gray-800 to-gray-700 shadow-2xl">
        <div class="container mx-auto px-4 py-6">
            <div class="flex justify-between items-center">
                <div class="flex items-center gap-4">
                    <img src="https://ik.imagekit.io/ys8l6suo53/lojo%201.png?updatedAt=" alt="Logo" class="site-logo h-16 w-auto rounded-lg shadow-lg">
                    <div>
                        <h1 id="siteTitle" class="text-3xl font-bold bg-gradient-to-r from-green-400 to-blue-400 bg-clip-text text-transparent">üñ•Ô∏è Montagem de PC</h1>
                        <p id="siteSubtitle" class="text-gray-300 text-sm">Monte seu PC dos sonhos</p>
                    </div>
                </div>
                <div class="flex gap-4 items-center">
                    <div class="text-right">
                        <p class="text-sm text-gray-400">Or√ßamento Total</p>
                        <p class="text-2xl font-bold text-green-400" id="totalPrice">R$ 0,00</p>
                    </div>
                    <div class="flex flex-col gap-2">
                        <button onclick="showAdminLogin('add')" class="bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 px-4 py-2 rounded-lg text-sm transition-all">
                            ‚ûï Cadastrar Produtos
                        </button>
                        <button onclick="showAdminLogin('manage')" class="bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 px-4 py-2 rounded-lg text-sm transition-all">
                            ‚öôÔ∏è Gerenciar Produtos
                        </button>
                        <button onclick="exportData()" class="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 px-4 py-2 rounded-lg text-sm transition-all">
                            üíæ Exportar Dados
                        </button>
                        <input type="file" id="importFile" accept=".json" onchange="importData(event)" class="hidden">
                        <button onclick="document.getElementById('importFile').click()" class="bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 px-4 py-2 rounded-lg text-sm transition-all">
                            üìÇ Importar Dados
                        </button>
                        <button onclick="showAdminLogin('customize')" class="bg-gradient-to-r from-pink-600 to-pink-700 hover:from-pink-700 hover:to-pink-800 px-4 py-2 rounded-lg text-sm transition-all">
                            üé® Personalizar Site
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Progress Bar -->
            <div class="mt-6">
                <div class="bg-gray-600 rounded-full h-3 shadow-inner">
                    <div id="progressBar" class="progress-bar h-3 rounded-full shadow-lg" style="width: 0%"></div>
                </div>
                <p class="text-sm text-gray-300 mt-2 text-center" id="progressText">Etapa 1 de 7</p>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- CPU Page -->
        <div id="cpuPage" class="page active">
            <div id="cpuBanner" class="banner-container hidden">
                <img id="cpuBannerImg" src="" alt="Banner" class="banner-image">
                <div class="banner-text">
                    <h3 id="cpuBannerTitle" class="text-2xl font-bold"></h3>
                    <p id="cpuBannerDesc" class="text-lg"></p>
                </div>
            </div>
            <div class="category-header">
                <h2 id="cpuTitle" class="text-4xl font-bold mb-3">üî• Escolha o Processador</h2>
                <p id="cpuDesc" class="text-blue-100 text-lg">O cora√ß√£o do seu computador - Define toda a performance</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="cpuProducts">
                <!-- Products will be loaded here -->
            </div>
            
            <div class="flex justify-between mt-10">
                <button disabled class="bg-gray-600 px-8 py-4 rounded-xl opacity-50 text-lg">‚¨ÖÔ∏è Anterior</button>
                <button onclick="nextPage('motherboard')" class="btn-gradient px-8 py-4 rounded-xl text-lg font-semibold transition-all" id="cpuNext" disabled>Pr√≥ximo ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- Motherboard Page -->
        <div id="motherboardPage" class="page">
            <div id="motherboardBanner" class="banner-container hidden">
                <img id="motherboardBannerImg" src="" alt="Banner" class="banner-image">
                <div class="banner-text">
                    <h3 id="motherboardBannerTitle" class="text-2xl font-bold"></h3>
                    <p id="motherboardBannerDesc" class="text-lg"></p>
                </div>
            </div>
            <div class="category-header">
                <h2 id="motherboardTitle" class="text-4xl font-bold mb-3">üîå Escolha a Placa-m√£e</h2>
                <p id="motherboardDesc" class="text-blue-100 text-lg">Base para todos os componentes - Conecta tudo</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="motherboardProducts">
                <!-- Products will be loaded here -->
            </div>
            
            <div class="flex justify-between mt-10">
                <button onclick="prevPage('cpu')" class="bg-gray-600 hover:bg-gray-700 px-8 py-4 rounded-xl text-lg transition-all">‚¨ÖÔ∏è Anterior</button>
                <button onclick="nextPage('ram')" class="btn-gradient px-8 py-4 rounded-xl text-lg font-semibold transition-all" id="motherboardNext" disabled>Pr√≥ximo ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- RAM Page -->
        <div id="ramPage" class="page">
            <div id="ramBanner" class="banner-container hidden">
                <img id="ramBannerImg" src="" alt="Banner" class="banner-image">
                <div class="banner-text">
                    <h3 id="ramBannerTitle" class="text-2xl font-bold"></h3>
                    <p id="ramBannerDesc" class="text-lg"></p>
                </div>
            </div>
            <div class="category-header">
                <h2 id="ramTitle" class="text-4xl font-bold mb-3">üß† Escolha a Mem√≥ria RAM</h2>
                <p id="ramDesc" class="text-blue-100 text-lg">Velocidade e multitarefa - Mais RAM, mais performance</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="ramProducts">
                <!-- Products will be loaded here -->
            </div>
            
            <div class="flex justify-between mt-10">
                <button onclick="prevPage('motherboard')" class="bg-gray-600 hover:bg-gray-700 px-8 py-4 rounded-xl text-lg transition-all">‚¨ÖÔ∏è Anterior</button>
                <button onclick="nextPage('storage')" class="btn-gradient px-8 py-4 rounded-xl text-lg font-semibold transition-all" id="ramNext" disabled>Pr√≥ximo ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- Storage Page -->
        <div id="storagePage" class="page">
            <div id="storageBanner" class="banner-container hidden">
                <img id="storageBannerImg" src="" alt="Banner" class="banner-image">
                <div class="banner-text">
                    <h3 id="storageBannerTitle" class="text-2xl font-bold"></h3>
                    <p id="storageBannerDesc" class="text-lg"></p>
                </div>
            </div>
            <div class="category-header">
                <h2 id="storageTitle" class="text-4xl font-bold mb-3">üíæ Escolha o Armazenamento</h2>
                <p id="storageDesc" class="text-blue-100 text-lg">SSD ou HD para seus arquivos - Velocidade de carregamento</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="storageProducts">
                <!-- Products will be loaded here -->
            </div>
            
            <div class="flex justify-between mt-10">
                <button onclick="prevPage('ram')" class="bg-gray-600 hover:bg-gray-700 px-8 py-4 rounded-xl text-lg transition-all">‚¨ÖÔ∏è Anterior</button>
                <button onclick="nextPage('gpu')" class="btn-gradient px-8 py-4 rounded-xl text-lg font-semibold transition-all" id="storageNext" disabled>Pr√≥ximo ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- GPU Page -->
        <div id="gpuPage" class="page">
            <div id="gpuBanner" class="banner-container hidden">
                <img id="gpuBannerImg" src="" alt="Banner" class="banner-image">
                <div class="banner-text">
                    <h3 id="gpuBannerTitle" class="text-2xl font-bold"></h3>
                    <p id="gpuBannerDesc" class="text-lg"></p>
                </div>
            </div>
            <div class="category-header">
                <h2 id="gpuTitle" class="text-4xl font-bold mb-3">üéÆ Escolha a Placa de V√≠deo</h2>
                <p id="gpuDesc" class="text-blue-100 text-lg">Para jogos e design gr√°fico - O poder visual do seu PC</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="gpuProducts">
                <!-- Products will be loaded here -->
            </div>
            
            <div class="flex justify-between mt-10">
                <button onclick="prevPage('storage')" class="bg-gray-600 hover:bg-gray-700 px-8 py-4 rounded-xl text-lg transition-all">‚¨ÖÔ∏è Anterior</button>
                <button onclick="nextPage('psu')" class="btn-gradient px-8 py-4 rounded-xl text-lg font-semibold transition-all" id="gpuNext" disabled>Pr√≥ximo ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- PSU Page -->
        <div id="psuPage" class="page">
            <div id="psuBanner" class="banner-container hidden">
                <img id="psuBannerImg" src="" alt="Banner" class="banner-image">
                <div class="banner-text">
                    <h3 id="psuBannerTitle" class="text-2xl font-bold"></h3>
                    <p id="psuBannerDesc" class="text-lg"></p>
                </div>
            </div>
            <div class="category-header">
                <h2 id="psuTitle" class="text-4xl font-bold mb-3">‚ö° Escolha a Fonte</h2>
                <p id="psuDesc" class="text-blue-100 text-lg">Energia confi√°vel para seu PC - Estabilidade √© tudo</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="psuProducts">
                <!-- Products will be loaded here -->
            </div>
            
            <div class="flex justify-between mt-10">
                <button onclick="prevPage('gpu')" class="bg-gray-600 hover:bg-gray-700 px-8 py-4 rounded-xl text-lg transition-all">‚¨ÖÔ∏è Anterior</button>
                <button onclick="nextPage('case')" class="btn-gradient px-8 py-4 rounded-xl text-lg font-semibold transition-all" id="psuNext" disabled>Pr√≥ximo ‚û°Ô∏è</button>
            </div>
        </div>

        <!-- Case Page -->
        <div id="casePage" class="page">
            <div id="caseBanner" class="banner-container hidden">
                <img id="caseBannerImg" src="" alt="Banner" class="banner-image">
                <div class="banner-text">
                    <h3 id="caseBannerTitle" class="text-2xl font-bold"></h3>
                    <p id="caseBannerDesc" class="text-lg"></p>
                </div>
            </div>
            <div class="category-header">
                <h2 id="caseTitle" class="text-4xl font-bold mb-3">üè† Escolha o Gabinete</h2>
                <p id="caseDesc" class="text-blue-100 text-lg">Casa para todos os componentes - Estilo e funcionalidade</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="caseProducts">
                <!-- Products will be loaded here -->
            </div>
            
            <div class="flex justify-between mt-10">
                <button onclick="prevPage('psu')" class="bg-gray-600 hover:bg-gray-700 px-8 py-4 rounded-xl text-lg transition-all">‚¨ÖÔ∏è Anterior</button>
                <button onclick="showSummary()" class="btn-gradient px-8 py-4 rounded-xl text-lg font-semibold transition-all" id="caseNext" disabled>Ver Or√ßamento üìã</button>
            </div>
        </div>

        <!-- Summary Page -->
        <div id="summaryPage" class="page">
            <div class="category-header">
                <h2 class="text-4xl font-bold mb-3">üìã Seu Or√ßamento Final</h2>
                <p class="text-blue-100 text-lg">Resumo completo da sua montagem</p>
            </div>
            
            <div class="bg-gradient-to-br from-gray-800 to-gray-700 rounded-2xl p-8 mb-8 shadow-2xl">
                <div id="summaryContent">
                    <!-- Summary will be loaded here -->
                </div>
                
                <div class="border-t border-gray-600 pt-6 mt-6">
                    <div class="flex justify-between items-center text-3xl font-bold">
                        <span>Total:</span>
                        <span class="text-green-400" id="finalTotal">R$ 0,00</span>
                    </div>
                </div>
            </div>
            
            <div class="flex gap-4">
                <button onclick="prevPage('case')" class="bg-gray-600 hover:bg-gray-700 px-6 py-3 rounded-xl transition-all">‚¨ÖÔ∏è Voltar</button>
                <button onclick="downloadBudgetPDF()" class="flex-1 btn-gradient px-6 py-3 rounded-xl font-semibold transition-all">üìÑ Salvar PDF</button>
                <button onclick="shareWhatsApp()" class="bg-green-500 hover:bg-green-600 px-6 py-3 rounded-xl transition-all">üì± WhatsApp</button>
            </div>
        </div>
    </main>

    <!-- Offline Game Modal -->
    <div id="offlineGameModal" class="fixed inset-0 bg-black bg-opacity-90 hidden items-center justify-center z-50">
        <div class="bg-gradient-to-br from-gray-800 to-gray-700 rounded-2xl p-8 w-full max-w-6xl mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="text-center mb-6">
                <h2 class="text-4xl font-bold bg-gradient-to-r from-red-400 to-orange-400 bg-clip-text text-transparent mb-2">
                    üì° SEM INTERNET DETECTADO
                </h2>
                <p class="text-xl text-gray-300 mb-4">Que tal jogar um game enquanto espera? üéÆ</p>
                <h3 class="text-3xl font-bold text-cyan-400">üîå CONECTE OS CABOS DO PC</h3>
                <p class="text-gray-300">Arraste os cabos para os locais corretos!</p>
            </div>

            <!-- Game Area -->
            <div class="bg-gradient-to-br from-gray-900 to-gray-800 rounded-xl p-6 mb-6">
                <!-- PC Case -->
                <div class="relative mx-auto" style="width: 600px; height: 400px;">
                    <!-- PC Case Background -->
                    <div class="absolute inset-0 bg-gradient-to-b from-gray-700 to-gray-900 rounded-lg border-4 border-gray-600 shadow-2xl">
                        <!-- PC Case Details -->
                        <div class="absolute top-4 left-4 w-16 h-8 bg-blue-500 rounded opacity-50"></div>
                        <div class="absolute top-4 right-4 w-12 h-12 bg-green-500 rounded-full opacity-30"></div>
                        <div class="absolute bottom-4 left-4 right-4 h-16 bg-gray-800 rounded border-2 border-gray-600"></div>
                    </div>

                    <!-- Connection Points -->
                    <div id="powerPort" class="connection-point absolute" style="top: 50px; right: 30px; width: 40px; height: 20px;" data-cable="power">
                        <div class="w-full h-full bg-yellow-600 rounded border-2 border-yellow-400 flex items-center justify-center text-xs font-bold">PWR</div>
                    </div>

                    <div id="usbPort" class="connection-point absolute" style="top: 100px; right: 30px; width: 30px; height: 15px;" data-cable="usb">
                        <div class="w-full h-full bg-blue-600 rounded border-2 border-blue-400 flex items-center justify-center text-xs font-bold">USB</div>
                    </div>

                    <div id="hdmiPort" class="connection-point absolute" style="top: 150px; right: 30px; width: 35px; height: 18px;" data-cable="hdmi">
                        <div class="w-full h-full bg-purple-600 rounded border-2 border-purple-400 flex items-center justify-center text-xs font-bold">HDMI</div>
                    </div>

                    <div id="audioPort" class="connection-point absolute" style="top: 200px; right: 30px; width: 25px; height: 25px;" data-cable="audio">
                        <div class="w-full h-full bg-green-600 rounded-full border-2 border-green-400 flex items-center justify-center text-xs font-bold">‚ô™</div>
                    </div>

                    <div id="ethernetPort" class="connection-point absolute" style="top: 250px; right: 30px; width: 40px; height: 20px;" data-cable="ethernet">
                        <div class="w-full h-full bg-orange-600 rounded border-2 border-orange-400 flex items-center justify-center text-xs font-bold">NET</div>
                    </div>

                    <!-- Cables -->
                    <div id="powerCable" class="cable draggable absolute cursor-grab" style="top: 50px; left: 50px;" data-type="power">
                        <div class="flex items-center">
                            <div class="w-8 h-4 bg-yellow-500 rounded border-2 border-yellow-300 mr-2"></div>
                            <div class="text-sm font-bold text-yellow-400">Cabo de For√ßa</div>
                        </div>
                    </div>

                    <div id="usbCable" class="cable draggable absolute cursor-grab" style="top: 100px; left: 50px;" data-type="usb">
                        <div class="flex items-center">
                            <div class="w-6 h-3 bg-blue-500 rounded border-2 border-blue-300 mr-2"></div>
                            <div class="text-sm font-bold text-blue-400">Cabo USB</div>
                        </div>
                    </div>

                    <div id="hdmiCable" class="cable draggable absolute cursor-grab" style="top: 150px; left: 50px;" data-type="hdmi">
                        <div class="flex items-center">
                            <div class="w-7 h-4 bg-purple-500 rounded border-2 border-purple-300 mr-2"></div>
                            <div class="text-sm font-bold text-purple-400">Cabo HDMI</div>
                        </div>
                    </div>

                    <div id="audioCable" class="cable draggable absolute cursor-grab" style="top: 200px; left: 50px;" data-type="audio">
                        <div class="flex items-center">
                            <div class="w-5 h-5 bg-green-500 rounded-full border-2 border-green-300 mr-2"></div>
                            <div class="text-sm font-bold text-green-400">Cabo √Åudio</div>
                        </div>
                    </div>

                    <div id="ethernetCable" class="cable draggable absolute cursor-grab" style="top: 250px; left: 50px;" data-type="ethernet">
                        <div class="flex items-center">
                            <div class="w-8 h-4 bg-orange-500 rounded border-2 border-orange-300 mr-2"></div>
                            <div class="text-sm font-bold text-orange-400">Cabo Ethernet</div>
                        </div>
                    </div>
                </div>

                <!-- Game Stats -->
                <div class="flex justify-center gap-8 mt-6">
                    <div class="text-center">
                        <div class="text-2xl font-bold text-green-400" id="gameScore">0</div>
                        <div class="text-sm text-gray-400">Pontos</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-blue-400" id="gameConnected">0/5</div>
                        <div class="text-sm text-gray-400">Conectados</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-yellow-400" id="gameTime">00:00</div>
                        <div class="text-sm text-gray-400">Tempo</div>
                    </div>
                </div>
            </div>

            <!-- Game Controls -->
            <div class="flex justify-center gap-4">
                <button onclick="resetGame()" class="bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-xl transition-all font-bold">
                    üîÑ Reiniciar Jogo
                </button>
                <button onclick="closeOfflineGame()" class="bg-gray-600 hover:bg-gray-700 px-6 py-3 rounded-xl transition-all font-bold">
                    ‚ùå Fechar
                </button>
                <button onclick="checkConnection()" class="bg-green-600 hover:bg-green-700 px-6 py-3 rounded-xl transition-all font-bold">
                    üì° Testar Internet
                </button>
            </div>

            <!-- Game Instructions -->
            <div class="mt-6 bg-gray-800 rounded-xl p-4">
                <h4 class="text-lg font-bold text-cyan-400 mb-2">üìã Como Jogar:</h4>
                <ul class="text-gray-300 space-y-1">
                    <li>‚Ä¢ <strong>Arraste</strong> cada cabo para sua porta correspondente</li>
                    <li>‚Ä¢ <strong>Cabo Amarelo</strong> ‚Üí Porta PWR (Energia)</li>
                    <li>‚Ä¢ <strong>Cabo Azul</strong> ‚Üí Porta USB</li>
                    <li>‚Ä¢ <strong>Cabo Roxo</strong> ‚Üí Porta HDMI (V√≠deo)</li>
                    <li>‚Ä¢ <strong>Cabo Verde</strong> ‚Üí Porta ‚ô™ (√Åudio)</li>
                    <li>‚Ä¢ <strong>Cabo Laranja</strong> ‚Üí Porta NET (Internet)</li>
                    <li>‚Ä¢ Conecte todos os 5 cabos para ganhar! üèÜ</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div id="adminModal" class="fixed inset-0 bg-black bg-opacity-70 hidden items-center justify-center z-50">
        <div class="bg-gradient-to-br from-gray-800 to-gray-700 rounded-2xl p-8 w-full max-w-md mx-4 shadow-2xl">
            <h3 class="text-2xl font-bold mb-6 text-center">üîê Acesso Administrativo</h3>
            <input type="password" id="adminPassword" placeholder="Digite a senha" class="w-full bg-gray-600 text-white px-4 py-4 rounded-xl mb-6 text-lg">
            <div class="flex gap-4">
                <button onclick="closeAdminModal()" class="flex-1 bg-gray-600 hover:bg-gray-700 px-4 py-3 rounded-xl transition-all">Cancelar</button>
                <button onclick="checkAdminPassword()" class="flex-1 bg-blue-600 hover:bg-blue-700 px-4 py-3 rounded-xl transition-all">Entrar</button>
            </div>
        </div>
    </div>

    <!-- Admin Panel - Add Products -->
    <div id="adminPanelAdd" class="fixed inset-0 bg-gray-900 hidden z-50 overflow-y-auto">
        <div class="container mx-auto px-4 py-6">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold bg-gradient-to-r from-green-400 to-blue-400 bg-clip-text text-transparent">‚ûï Cadastrar Novo Produto</h2>
                <button onclick="closeAdminPanel()" class="bg-red-600 hover:bg-red-700 px-6 py-3 rounded-xl transition-all">‚ùå Fechar</button>
            </div>
            
            <div class="bg-gradient-to-br from-gray-800 to-gray-700 rounded-2xl p-8 shadow-2xl">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label class="block text-lg font-medium mb-3">Categoria</label>
                        <select id="newProductCategory" class="w-full bg-gray-600 text-white px-4 py-3 rounded-xl text-lg">
                            <option value="cpu">üî• Processador</option>
                            <option value="motherboard">üîå Placa-m√£e</option>
                            <option value="ram">üß† Mem√≥ria RAM</option>
                            <option value="storage">üíæ Armazenamento</option>
                            <option value="gpu">üéÆ Placa de V√≠deo</option>
                            <option value="psu">‚ö° Fonte</option>
                            <option value="case">üè† Gabinete</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-lg font-medium mb-3">Nome do Produto</label>
                        <input type="text" id="newProductName" placeholder="Ex: Intel Core i5-12400F" class="w-full bg-gray-600 text-white px-4 py-3 rounded-xl text-lg">
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label class="block text-lg font-medium mb-3">Pre√ßo (R$)</label>
                        <input type="number" id="newProductPrice" placeholder="899.99" step="0.01" class="w-full bg-gray-600 text-white px-4 py-3 rounded-xl text-lg">
                    </div>
                    <div>
                        <label class="block text-lg font-medium mb-3">Especifica√ß√µes</label>
                        <input type="text" id="newProductSpecs" placeholder="6 n√∫cleos, 12 threads, 4.4GHz" class="w-full bg-gray-600 text-white px-4 py-3 rounded-xl text-lg">
                    </div>
                </div>

                <div class="mb-6">
                    <label class="block text-lg font-medium mb-3">Foto do Produto</label>
                    <div class="flex gap-4 items-center">
                        <input type="file" id="newProductImage" accept="image/*" class="hidden">
                        <button onclick="document.getElementById('newProductImage').click()" class="bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-xl transition-all">
                            üì∑ Escolher Foto
                        </button>
                        <div id="newImagePreview" class="hidden">
                            <img id="newImagePreviewImg" class="w-20 h-20 object-cover rounded-lg">
                        </div>
                    </div>
                </div>
                
                <button onclick="addNewProduct()" class="w-full btn-gradient text-white py-4 px-6 rounded-xl text-xl font-bold transition-all">
                    ‚ûï Adicionar Produto
                </button>
            </div>
        </div>
    </div>

    <!-- Admin Panel - Manage Products -->
    <div id="adminPanelManage" class="fixed inset-0 bg-gray-900 hidden z-50 overflow-y-auto">
        <div class="container mx-auto px-4 py-6">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">‚öôÔ∏è Gerenciar Produtos</h2>
                <button onclick="closeAdminPanel()" class="bg-red-600 hover:bg-red-700 px-6 py-3 rounded-xl transition-all">‚ùå Fechar</button>
            </div>
            
            <div id="manageProductsContent">
                <!-- Products management will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Admin Panel - Customize Site -->
    <div id="adminPanelCustomize" class="fixed inset-0 bg-gray-900 hidden z-50 overflow-y-auto">
        <div class="container mx-auto px-4 py-6">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent">üé® Personalizar Site</h2>
                <button onclick="closeAdminPanel()" class="bg-red-600 hover:bg-red-700 px-6 py-3 rounded-xl transition-all">‚ùå Fechar</button>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Site Info -->
                <div class="bg-gradient-to-br from-gray-800 to-gray-700 rounded-2xl p-6 shadow-2xl">
                    <h3 class="text-2xl font-bold mb-6 text-center text-cyan-400">üìù Informa√ß√µes do Site</h3>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-lg font-medium mb-2">T√≠tulo Principal</label>
                            <input type="text" id="customSiteTitle" placeholder="üñ•Ô∏è Montagem de PC" class="w-full bg-gray-600 text-white px-4 py-3 rounded-xl text-lg">
                        </div>
                        
                        <div>
                            <label class="block text-lg font-medium mb-2">Subt√≠tulo</label>
                            <input type="text" id="customSiteSubtitle" placeholder="Monte seu PC dos sonhos" class="w-full bg-gray-600 text-white px-4 py-3 rounded-xl text-lg">
                        </div>
                        
                        <div>
                            <label class="block text-lg font-medium mb-2">Logo do Site (URL)</label>
                            <input type="text" id="customSiteLogo" placeholder="https://exemplo.com/logo.png" class="w-full bg-gray-600 text-white px-4 py-3 rounded-xl text-lg">
                        </div>
                    </div>
                </div>
                
                <!-- Category Customization -->
                <div class="bg-gradient-to-br from-gray-800 to-gray-700 rounded-2xl p-6 shadow-2xl">
                    <h3 class="text-2xl font-bold mb-6 text-center text-magenta-400">üè∑Ô∏è Personalizar Categorias</h3>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-lg font-medium mb-2">Categoria</label>
                            <select id="categorySelect" class="w-full bg-gray-600 text-white px-4 py-3 rounded-xl text-lg" onchange="loadCategoryCustomization()">
                                <option value="cpu">üî• Processador</option>
                                <option value="motherboard">üîå Placa-m√£e</option>
                                <option value="ram">üß† Mem√≥ria RAM</option>
                                <option value="storage">üíæ Armazenamento</option>
                                <option value="gpu">üéÆ Placa de V√≠deo</option>
                                <option value="psu">‚ö° Fonte</option>
                                <option value="case">üè† Gabinete</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-lg font-medium mb-2">T√≠tulo da Categoria</label>
                            <input type="text" id="categoryTitle" class="w-full bg-gray-600 text-white px-4 py-3 rounded-xl text-lg">
                        </div>
                        
                        <div>
                            <label class="block text-lg font-medium mb-2">Descri√ß√£o</label>
                            <input type="text" id="categoryDesc" class="w-full bg-gray-600 text-white px-4 py-3 rounded-xl text-lg">
                        </div>
                        
                        <div>
                            <label class="block text-lg font-medium mb-2">Banner da Categoria (URL)</label>
                            <input type="text" id="categoryBanner" placeholder="https://exemplo.com/banner.jpg" class="w-full bg-gray-600 text-white px-4 py-3 rounded-xl text-lg">
                        </div>
                        
                        <div>
                            <label class="block text-lg font-medium mb-2">T√≠tulo do Banner</label>
                            <input type="text" id="categoryBannerTitle" class="w-full bg-gray-600 text-white px-4 py-3 rounded-xl text-lg">
                        </div>
                        
                        <div>
                            <label class="block text-lg font-medium mb-2">Descri√ß√£o do Banner</label>
                            <input type="text" id="categoryBannerDesc" class="w-full bg-gray-600 text-white px-4 py-3 rounded-xl text-lg">
                        </div>
                        
                        <button onclick="saveCategoryCustomization()" class="w-full bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 px-4 py-3 rounded-xl transition-all font-bold">
                            üíæ Salvar Categoria
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="mt-8 text-center">
                <button onclick="saveAllCustomizations()" class="bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 px-8 py-4 rounded-xl text-xl font-bold transition-all">
                    ‚úÖ Aplicar Todas as Personaliza√ß√µes
                </button>
            </div>
        </div>
    </div>

    <script>
        // Product database - Load from localStorage or use defaults
        let products = JSON.parse(localStorage.getItem('pcProducts')) || {
            cpu: [
                { id: 1, name: "Intel Core i5-12400F", price: 899.99, specs: "6 n√∫cleos, 12 threads, 4.4GHz", image: null },
                { id: 2, name: "AMD Ryzen 5 5600X", price: 1199.99, specs: "6 n√∫cleos, 12 threads, 4.6GHz", image: null },
                { id: 3, name: "Intel Core i7-12700K", price: 1899.99, specs: "12 n√∫cleos, 20 threads, 5.0GHz", image: null },
                { id: 4, name: "AMD Ryzen 7 5800X", price: 1699.99, specs: "8 n√∫cleos, 16 threads, 4.7GHz", image: null }
            ],
            motherboard: [
                { id: 1, name: "ASUS Prime B550M-A", price: 599.99, specs: "AM4, DDR4, PCIe 4.0", image: null },
                { id: 2, name: "MSI B450 Tomahawk Max", price: 499.99, specs: "AM4, DDR4, ATX", image: null },
                { id: 3, name: "Gigabyte Z690 AORUS", price: 1299.99, specs: "LGA1700, DDR5, WiFi 6", image: null },
                { id: 4, name: "ASRock B660M Pro4", price: 699.99, specs: "LGA1700, DDR4, mATX", image: null }
            ],
            ram: [
                { id: 1, name: "Corsair Vengeance 16GB", price: 399.99, specs: "DDR4 3200MHz, 2x8GB", image: null },
                { id: 2, name: "Kingston Fury 32GB", price: 799.99, specs: "DDR4 3600MHz, 2x16GB", image: null },
                { id: 3, name: "G.Skill Trident Z 16GB", price: 499.99, specs: "DDR4 3600MHz, RGB", image: null },
                { id: 4, name: "Crucial Ballistix 16GB", price: 349.99, specs: "DDR4 3200MHz, Low Profile", image: null }
            ],
            storage: [
                { id: 1, name: "Samsung 980 SSD 1TB", price: 599.99, specs: "NVMe M.2, 3500MB/s", image: null },
                { id: 2, name: "WD Blue SSD 500GB", price: 299.99, specs: "SATA III, 560MB/s", image: null },
                { id: 3, name: "Seagate Barracuda 2TB", price: 399.99, specs: "HDD 7200RPM, SATA", image: null },
                { id: 4, name: "Kingston NV2 1TB", price: 449.99, specs: "NVMe M.2, 3500MB/s", image: null }
            ],
            gpu: [
                { id: 1, name: "NVIDIA RTX 4060", price: 2199.99, specs: "8GB GDDR6, Ray Tracing", image: null },
                { id: 2, name: "AMD RX 6600 XT", price: 1899.99, specs: "8GB GDDR6, RDNA2", image: null },
                { id: 3, name: "NVIDIA RTX 4070", price: 3499.99, specs: "12GB GDDR6X, DLSS 3", image: null },
                { id: 4, name: "AMD RX 7800 XT", price: 2999.99, specs: "16GB GDDR6, AV1 Encode", image: null }
            ],
            psu: [
                { id: 1, name: "Corsair CV650 650W", price: 399.99, specs: "80+ Bronze, Modular", image: null },
                { id: 2, name: "Seasonic Focus 750W", price: 599.99, specs: "80+ Gold, Full Modular", image: null },
                { id: 3, name: "EVGA SuperNOVA 850W", price: 799.99, specs: "80+ Gold, Modular", image: null },
                { id: 4, name: "Cooler Master MWE 600W", price: 299.99, specs: "80+ White, Semi-Modular", image: null }
            ],
            case: [
                { id: 1, name: "Cooler Master MasterBox", price: 299.99, specs: "Mid Tower, Vidro Temperado", image: null },
                { id: 2, name: "NZXT H510", price: 499.99, specs: "Mid Tower, Minimalista", image: null },
                { id: 3, name: "Corsair 4000D", price: 599.99, specs: "Mid Tower, Airflow", image: null },
                { id: 4, name: "Fractal Design Core", price: 399.99, specs: "Mid Tower, Silencioso", image: null }
            ]
        };

        // Selected components
        let selectedComponents = {};
        let currentPage = 'cpu';
        let totalPrice = 0;
        let adminMode = '';
        
        // Site customization data
        let siteCustomization = JSON.parse(localStorage.getItem('siteCustomization')) || {
            siteTitle: 'üñ•Ô∏è Montagem de PC',
            siteSubtitle: 'Monte seu PC dos sonhos',
            siteLogo: 'https://ik.imagekit.io/ys8l6suo53/lojo%201.png?updatedAt=',
            categories: {
                cpu: {
                    title: 'üî• Escolha o Processador',
                    desc: 'O cora√ß√£o do seu computador - Define toda a performance',
                    banner: '',
                    bannerTitle: '',
                    bannerDesc: ''
                },
                motherboard: {
                    title: 'üîå Escolha a Placa-m√£e',
                    desc: 'Base para todos os componentes - Conecta tudo',
                    banner: '',
                    bannerTitle: '',
                    bannerDesc: ''
                },
                ram: {
                    title: 'üß† Escolha a Mem√≥ria RAM',
                    desc: 'Velocidade e multitarefa - Mais RAM, mais performance',
                    banner: '',
                    bannerTitle: '',
                    bannerDesc: ''
                },
                storage: {
                    title: 'üíæ Escolha o Armazenamento',
                    desc: 'SSD ou HD para seus arquivos - Velocidade de carregamento',
                    banner: '',
                    bannerTitle: '',
                    bannerDesc: ''
                },
                gpu: {
                    title: 'üéÆ Escolha a Placa de V√≠deo',
                    desc: 'Para jogos e design gr√°fico - O poder visual do seu PC',
                    banner: '',
                    bannerTitle: '',
                    bannerDesc: ''
                },
                psu: {
                    title: '‚ö° Escolha a Fonte',
                    desc: 'Energia confi√°vel para seu PC - Estabilidade √© tudo',
                    banner: '',
                    bannerTitle: '',
                    bannerDesc: ''
                },
                case: {
                    title: 'üè† Escolha o Gabinete',
                    desc: 'Casa para todos os componentes - Estilo e funcionalidade',
                    banner: '',
                    bannerTitle: '',
                    bannerDesc: ''
                }
            }
        };

        // Complete data persistence system
        function saveProducts() {
            try {
                localStorage.setItem('pcProducts', JSON.stringify(products));
                localStorage.setItem('pcProducts_backup', JSON.stringify(products));
                localStorage.setItem('lastSaved', new Date().toISOString());
                console.log('‚úÖ Produtos salvos com sucesso!');
            } catch (error) {
                console.error('‚ùå Erro ao salvar produtos:', error);
                alert('Erro ao salvar dados. Verifique o espa√ßo de armazenamento.');
            }
        }

        function saveSelectedComponents() {
            try {
                localStorage.setItem('selectedComponents', JSON.stringify(selectedComponents));
                localStorage.setItem('totalPrice', totalPrice.toString());
                localStorage.setItem('currentPage', currentPage);
                console.log('‚úÖ Sele√ß√µes salvas!');
            } catch (error) {
                console.error('‚ùå Erro ao salvar sele√ß√µes:', error);
            }
        }

        function loadSelectedComponents() {
            try {
                const saved = localStorage.getItem('selectedComponents');
                const savedPrice = localStorage.getItem('totalPrice');
                const savedPage = localStorage.getItem('currentPage');
                
                if (saved) {
                    selectedComponents = JSON.parse(saved);
                    console.log('‚úÖ Sele√ß√µes carregadas!');
                }
                if (savedPrice) {
                    totalPrice = parseFloat(savedPrice);
                    updateTotalPrice();
                }
                if (savedPage) {
                    currentPage = savedPage;
                }
            } catch (error) {
                console.error('‚ùå Erro ao carregar sele√ß√µes:', error);
            }
        }

        function createBackup() {
            const backup = {
                products: products,
                selectedComponents: selectedComponents,
                totalPrice: totalPrice,
                currentPage: currentPage,
                timestamp: new Date().toISOString()
            };
            
            try {
                localStorage.setItem('fullBackup', JSON.stringify(backup));
                localStorage.setItem('backupDate', new Date().toLocaleString('pt-BR'));
                return true;
            } catch (error) {
                console.error('‚ùå Erro ao criar backup:', error);
                return false;
            }
        }

        function restoreFromBackup() {
            try {
                const backup = localStorage.getItem('fullBackup');
                if (backup) {
                    const data = JSON.parse(backup);
                    products = data.products || products;
                    selectedComponents = data.selectedComponents || {};
                    totalPrice = data.totalPrice || 0;
                    currentPage = data.currentPage || 'cpu';
                    
                    saveProducts();
                    saveSelectedComponents();
                    updateTotalPrice();
                    loadProducts(currentPage);
                    
                    console.log('‚úÖ Backup restaurado!');
                    return true;
                }
            } catch (error) {
                console.error('‚ùå Erro ao restaurar backup:', error);
            }
            return false;
        }

        function exportData() {
            const exportData = {
                products: products,
                selectedComponents: selectedComponents,
                totalPrice: totalPrice,
                exportDate: new Date().toISOString(),
                version: '2.0'
            };
            
            const dataStr = JSON.stringify(exportData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `pc-builder-data-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            alert('‚úÖ Dados exportados com sucesso! Guarde este arquivo como backup.');
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);
                    
                    if (importedData.products) {
                        if (confirm('Deseja substituir todos os produtos atuais pelos importados?')) {
                            products = importedData.products;
                            saveProducts();
                            loadProducts(currentPage);
                            alert('‚úÖ Produtos importados com sucesso!');
                        }
                    }
                    
                    if (importedData.selectedComponents) {
                        if (confirm('Deseja restaurar as sele√ß√µes salvas?')) {
                            selectedComponents = importedData.selectedComponents;
                            totalPrice = importedData.totalPrice || 0;
                            saveSelectedComponents();
                            updateTotalPrice();
                            loadProducts(currentPage);
                            alert('‚úÖ Sele√ß√µes restauradas!');
                        }
                    }
                } catch (error) {
                    alert('‚ùå Erro ao importar dados. Verifique se o arquivo est√° correto.');
                    console.error('Erro na importa√ß√£o:', error);
                }
            };
            reader.readAsText(file);
        }

        // Load products for current page
        function loadProducts(category) {
            const container = document.getElementById(category + 'Products');
            container.innerHTML = '';
            
            products[category].forEach(product => {
                const card = document.createElement('div');
                card.className = 'component-card rounded-2xl p-6 cursor-pointer border-2 border-transparent shadow-lg';
                card.onclick = () => selectProduct(category, product);
                
                if (selectedComponents[category] && selectedComponents[category].id === product.id) {
                    card.classList.add('selected');
                }
                
                const imageHtml = product.image 
                    ? `<img src="${product.image}" alt="${product.name}" class="product-image mb-4">`
                    : `<div class="image-placeholder mb-4">üì¶</div>`;
                
                card.innerHTML = `
                    ${imageHtml}
                    <h3 class="font-bold text-xl mb-3 text-white">${product.name}</h3>
                    <p class="text-gray-300 text-sm mb-4 leading-relaxed">${product.specs}</p>
                    <p class="text-green-400 font-bold text-2xl">R$ ${product.price.toFixed(2).replace('.', ',')}</p>
                `;
                
                container.appendChild(card);
            });
        }

        // Select product with auto-save
        function selectProduct(category, product) {
            // If clicking the same product, deselect it
            if (selectedComponents[category] && selectedComponents[category].id === product.id) {
                delete selectedComponents[category];
                const nextBtn = document.getElementById(category + 'Next');
                if (nextBtn) nextBtn.disabled = true;
            } else {
                selectedComponents[category] = product;
                const nextBtn = document.getElementById(category + 'Next');
                if (nextBtn) nextBtn.disabled = false;
            }
            
            updateTotalPrice();
            saveSelectedComponents(); // Auto-save selections
            loadProducts(category); // Reload to show selection
        }

        // Update total price
        function updateTotalPrice() {
            totalPrice = Object.values(selectedComponents).reduce((sum, component) => sum + component.price, 0);
            document.getElementById('totalPrice').textContent = `R$ ${totalPrice.toFixed(2).replace('.', ',')}`;
        }

        // Navigation
        function nextPage(page) {
            document.getElementById(currentPage + 'Page').classList.remove('active');
            document.getElementById(page + 'Page').classList.add('active');
            currentPage = page;
            loadProducts(page);
            updateProgress();
        }

        function prevPage(page) {
            document.getElementById(currentPage + 'Page').classList.remove('active');
            document.getElementById(page + 'Page').classList.add('active');
            currentPage = page;
            updateProgress();
        }

        // Update progress bar
        function updateProgress() {
            const pages = ['cpu', 'motherboard', 'ram', 'storage', 'gpu', 'psu', 'case'];
            const currentIndex = pages.indexOf(currentPage);
            const progress = ((currentIndex + 1) / pages.length) * 100;
            
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = `Etapa ${currentIndex + 1} de ${pages.length}`;
        }

        // Show summary
        function showSummary() {
            document.getElementById(currentPage + 'Page').classList.remove('active');
            document.getElementById('summaryPage').classList.add('active');
            
            const summaryContent = document.getElementById('summaryContent');
            summaryContent.innerHTML = '';
            
            const categories = {
                cpu: 'üî• Processador',
                motherboard: 'üîå Placa-m√£e',
                ram: 'üß† Mem√≥ria RAM',
                storage: 'üíæ Armazenamento',
                gpu: 'üéÆ Placa de V√≠deo',
                psu: '‚ö° Fonte',
                case: 'üè† Gabinete'
            };
            
            Object.entries(selectedComponents).forEach(([category, component]) => {
                const item = document.createElement('div');
                item.className = 'flex justify-between items-center py-4 border-b border-gray-600';
                
                const imageHtml = component.image 
                    ? `<img src="${component.image}" alt="${component.name}" class="w-16 h-16 object-cover rounded-lg mr-4">`
                    : `<div class="w-16 h-16 bg-gray-600 rounded-lg mr-4 flex items-center justify-center text-2xl">üì¶</div>`;
                
                item.innerHTML = `
                    <div class="flex items-center">
                        ${imageHtml}
                        <div>
                            <p class="font-semibold text-lg">${categories[category]}</p>
                            <p class="text-gray-300">${component.name}</p>
                            <p class="text-gray-400 text-sm">${component.specs}</p>
                        </div>
                    </div>
                    <p class="font-bold text-green-400 text-xl">R$ ${component.price.toFixed(2).replace('.', ',')}</p>
                `;
                summaryContent.appendChild(item);
            });
            
            document.getElementById('finalTotal').textContent = `R$ ${totalPrice.toFixed(2).replace('.', ',')}`;
            
            // Update progress to 100%
            document.getElementById('progressBar').style.width = '100%';
            document.getElementById('progressText').textContent = 'Or√ßamento Finalizado!';
        }

        // Admin functions
        function showAdminLogin(mode) {
            adminMode = mode;
            document.getElementById('adminModal').classList.remove('hidden');
            document.getElementById('adminModal').classList.add('flex');
            document.getElementById('adminPassword').focus();
        }

        function closeAdminModal() {
            document.getElementById('adminModal').classList.add('hidden');
            document.getElementById('adminModal').classList.remove('flex');
            document.getElementById('adminPassword').value = '';
        }

        function checkAdminPassword() {
            const password = document.getElementById('adminPassword').value;
            if (password === 'lasertecsuprimentos') {
                closeAdminModal();
                if (adminMode === 'add') {
                    document.getElementById('adminPanelAdd').classList.remove('hidden');
                } else if (adminMode === 'manage') {
                    document.getElementById('adminPanelManage').classList.remove('hidden');
                    loadManageProducts();
                } else if (adminMode === 'customize') {
                    document.getElementById('adminPanelCustomize').classList.remove('hidden');
                    loadCustomizationPanel();
                }
            } else {
                alert('Senha incorreta!');
            }
        }

        function closeAdminPanel() {
            document.getElementById('adminPanelAdd').classList.add('hidden');
            document.getElementById('adminPanelManage').classList.add('hidden');
            document.getElementById('adminPanelCustomize').classList.add('hidden');
        }

        // Image preview for new product
        document.getElementById('newProductImage').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('newImagePreview').classList.remove('hidden');
                    document.getElementById('newImagePreviewImg').src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        });

        function addNewProduct() {
            const category = document.getElementById('newProductCategory').value;
            const name = document.getElementById('newProductName').value;
            const price = parseFloat(document.getElementById('newProductPrice').value);
            const specs = document.getElementById('newProductSpecs').value;
            const imageFile = document.getElementById('newProductImage').files[0];
            
            if (!name || !price || !specs) {
                alert('Por favor, preencha todos os campos obrigat√≥rios!');
                return;
            }
            
            const newId = Math.max(...products[category].map(p => p.id)) + 1;
            
            if (imageFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const newProduct = { 
                        id: newId, 
                        name, 
                        price, 
                        specs, 
                        image: e.target.result 
                    };
                    
                    products[category].push(newProduct);
                    saveProducts();
                    createBackup(); // Create automatic backup
                    
                    // Reload current page if it matches the category
                    if (currentPage === category) {
                        loadProducts(category);
                    }
                    
                    clearAddForm();
                    alert('‚úÖ Produto adicionado e salvo permanentemente!');
                };
                reader.readAsDataURL(imageFile);
            } else {
                const newProduct = { 
                    id: newId, 
                    name, 
                    price, 
                    specs, 
                    image: null 
                };
                
                products[category].push(newProduct);
                saveProducts();
                createBackup(); // Create automatic backup
                
                // Reload current page if it matches the category
                if (currentPage === category) {
                    loadProducts(category);
                }
                
                clearAddForm();
                alert('‚úÖ Produto adicionado e salvo permanentemente!');
            }
        }

        function clearAddForm() {
            document.getElementById('newProductName').value = '';
            document.getElementById('newProductPrice').value = '';
            document.getElementById('newProductSpecs').value = '';
            document.getElementById('newProductImage').value = '';
            document.getElementById('newImagePreview').classList.add('hidden');
        }

        // Load manage products
        function loadManageProducts() {
            const container = document.getElementById('manageProductsContent');
            container.innerHTML = '';
            
            const categories = {
                cpu: 'üî• Processador',
                motherboard: 'üîå Placa-m√£e',
                ram: 'üß† Mem√≥ria RAM',
                storage: 'üíæ Armazenamento',
                gpu: 'üéÆ Placa de V√≠deo',
                psu: '‚ö° Fonte',
                case: 'üè† Gabinete'
            };
            
            Object.entries(categories).forEach(([category, categoryName]) => {
                const categorySection = document.createElement('div');
                categorySection.className = 'mb-8';
                
                categorySection.innerHTML = `
                    <h3 class="text-2xl font-bold mb-4 text-center bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">${categoryName}</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="manage-${category}">
                    </div>
                `;
                
                container.appendChild(categorySection);
                
                const categoryContainer = document.getElementById(`manage-${category}`);
                
                products[category].forEach(product => {
                    const card = document.createElement('div');
                    card.className = 'admin-card rounded-xl p-6 shadow-lg';
                    
                    const imageHtml = product.image 
                        ? `<img src="${product.image}" alt="${product.name}" class="w-full h-32 object-cover rounded-lg mb-4">`
                        : `<div class="w-full h-32 bg-gray-600 rounded-lg mb-4 flex items-center justify-center text-3xl">üì¶</div>`;
                    
                    card.innerHTML = `
                        ${imageHtml}
                        <h4 class="font-bold text-lg mb-2">${product.name}</h4>
                        <p class="text-gray-300 text-sm mb-2">${product.specs}</p>
                        <p class="text-green-400 font-bold mb-4">R$ ${product.price.toFixed(2).replace('.', ',')}</p>
                        <div class="flex gap-2">
                            <button onclick="editProduct('${category}', ${product.id})" class="flex-1 bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded-lg text-sm transition-all">
                                ‚úèÔ∏è Editar
                            </button>
                            <button onclick="deleteProduct('${category}', ${product.id})" class="flex-1 bg-red-600 hover:bg-red-700 px-3 py-2 rounded-lg text-sm transition-all">
                                üóëÔ∏è Excluir
                            </button>
                        </div>
                    `;
                    
                    categoryContainer.appendChild(card);
                });
            });
        }

        function editProduct(category, productId) {
            const product = products[category].find(p => p.id === productId);
            if (!product) return;
            
            const newName = prompt('Nome do produto:', product.name);
            if (newName === null) return;
            
            const newPrice = prompt('Pre√ßo (R$):', product.price);
            if (newPrice === null) return;
            
            const newSpecs = prompt('Especifica√ß√µes:', product.specs);
            if (newSpecs === null) return;
            
            if (newName && newPrice && newSpecs) {
                product.name = newName;
                product.price = parseFloat(newPrice);
                product.specs = newSpecs;
                
                saveProducts();
                createBackup(); // Create automatic backup
                loadManageProducts();
                
                // Reload current page if it matches the category
                if (currentPage === category) {
                    loadProducts(category);
                }
                
                alert('‚úÖ Produto atualizado e salvo permanentemente!');
            }
        }

        function deleteProduct(category, productId) {
            if (confirm('Tem certeza que deseja excluir este produto?')) {
                products[category] = products[category].filter(p => p.id !== productId);
                saveProducts();
                createBackup(); // Create automatic backup
                loadManageProducts();
                
                // Reload current page if it matches the category
                if (currentPage === category) {
                    loadProducts(category);
                }
                
                alert('‚úÖ Produto exclu√≠do e altera√ß√µes salvas permanentemente!');
            }
        }

        // Download budget as PDF with images and logo
        async function downloadBudgetPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            const categories = {
                cpu: 'Processador',
                motherboard: 'Placa-m√£e',
                ram: 'Mem√≥ria RAM',
                storage: 'Armazenamento',
                gpu: 'Placa de V√≠deo',
                psu: 'Fonte',
                case: 'Gabinete'
            };
            
            let yPosition = 20;
            
            try {
                // Add logo
                if (siteCustomization.siteLogo) {
                    try {
                        const logoImg = await loadImageAsBase64(siteCustomization.siteLogo);
                        doc.addImage(logoImg, 'PNG', 15, yPosition, 30, 20);
                    } catch (error) {
                        console.log('Logo n√£o p√¥de ser carregada:', error);
                    }
                }
                
                // Title
                doc.setFontSize(24);
                doc.setTextColor(0, 100, 200);
                doc.text('OR√áAMENTO DE PC', 50, yPosition + 15);
                
                // Subtitle
                doc.setFontSize(12);
                doc.setTextColor(100, 100, 100);
                doc.text(`Gerado em: ${new Date().toLocaleString('pt-BR')}`, 50, yPosition + 25);
                
                yPosition += 45;
                
                // Components
                for (const [category, component] of Object.entries(selectedComponents)) {
                    // Check if we need a new page
                    if (yPosition > 250) {
                        doc.addPage();
                        yPosition = 20;
                    }
                    
                    // Category title
                    doc.setFontSize(16);
                    doc.setTextColor(0, 150, 100);
                    doc.text(categories[category], 15, yPosition);
                    
                    yPosition += 10;
                    
                    // Component image
                    if (component.image) {
                        try {
                            const componentImg = await loadImageAsBase64(component.image);
                            doc.addImage(componentImg, 'JPEG', 15, yPosition, 40, 30);
                        } catch (error) {
                            // If image fails, add placeholder
                            doc.setFillColor(200, 200, 200);
                            doc.rect(15, yPosition, 40, 30, 'F');
                            doc.setTextColor(100, 100, 100);
                            doc.setFontSize(10);
                            doc.text('Sem imagem', 25, yPosition + 18);
                        }
                    } else {
                        // Placeholder for no image
                        doc.setFillColor(200, 200, 200);
                        doc.rect(15, yPosition, 40, 30, 'F');
                        doc.setTextColor(100, 100, 100);
                        doc.setFontSize(10);
                        doc.text('üì¶', 32, yPosition + 18);
                    }
                    
                    // Component details
                    doc.setTextColor(0, 0, 0);
                    doc.setFontSize(14);
                    doc.text(component.name, 60, yPosition + 8);
                    
                    doc.setFontSize(10);
                    doc.setTextColor(80, 80, 80);
                    doc.text(component.specs, 60, yPosition + 16);
                    
                    doc.setFontSize(14);
                    doc.setTextColor(0, 150, 0);
                    doc.text(`R$ ${component.price.toFixed(2).replace('.', ',')}`, 60, yPosition + 26);
                    
                    yPosition += 45;
                    
                    // Add separator line
                    doc.setDrawColor(200, 200, 200);
                    doc.line(15, yPosition - 5, 195, yPosition - 5);
                }
                
                // Total
                yPosition += 10;
                doc.setFontSize(18);
                doc.setTextColor(0, 100, 0);
                doc.text(`TOTAL: R$ ${totalPrice.toFixed(2).replace('.', ',')}`, 15, yPosition);
                
                // Footer
                yPosition += 20;
                doc.setFontSize(10);
                doc.setTextColor(100, 100, 100);
                doc.text('Or√ßamento gerado pelo sistema de montagem de PC', 15, yPosition);
                doc.text(`${siteCustomization.siteTitle} - ${siteCustomization.siteSubtitle}`, 15, yPosition + 8);
                
                // Save PDF
                const fileName = `orcamento-pc-${new Date().toISOString().split('T')[0]}.pdf`;
                doc.save(fileName);
                
                alert('‚úÖ PDF gerado com sucesso! Arquivo salvo com imagens e logo.');
                
            } catch (error) {
                console.error('Erro ao gerar PDF:', error);
                alert('‚ùå Erro ao gerar PDF. Tentando vers√£o simplificada...');
                
                // Fallback - simple PDF without images
                generateSimplePDF();
            }
        }
        
        // Helper function to load image as base64
        function loadImageAsBase64(url) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.crossOrigin = 'anonymous';
                
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    
                    canvas.width = img.width;
                    canvas.height = img.height;
                    
                    ctx.drawImage(img, 0, 0);
                    
                    try {
                        const dataURL = canvas.toDataURL('image/jpeg', 0.8);
                        resolve(dataURL);
                    } catch (error) {
                        reject(error);
                    }
                };
                
                img.onerror = function() {
                    reject(new Error('Failed to load image'));
                };
                
                // Handle data URLs (base64 images)
                if (url.startsWith('data:')) {
                    resolve(url);
                } else {
                    img.src = url;
                }
            });
        }
        
        // Fallback simple PDF generation
        function generateSimplePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            const categories = {
                cpu: 'Processador',
                motherboard: 'Placa-m√£e',
                ram: 'Mem√≥ria RAM',
                storage: 'Armazenamento',
                gpu: 'Placa de V√≠deo',
                psu: 'Fonte',
                case: 'Gabinete'
            };
            
            let yPosition = 30;
            
            // Title
            doc.setFontSize(20);
            doc.setTextColor(0, 100, 200);
            doc.text('OR√áAMENTO DE PC', 15, yPosition);
            
            yPosition += 15;
            doc.setFontSize(10);
            doc.setTextColor(100, 100, 100);
            doc.text(`Gerado em: ${new Date().toLocaleString('pt-BR')}`, 15, yPosition);
            
            yPosition += 20;
            
            // Components
            Object.entries(selectedComponents).forEach(([category, component]) => {
                if (yPosition > 250) {
                    doc.addPage();
                    yPosition = 20;
                }
                
                doc.setFontSize(14);
                doc.setTextColor(0, 150, 100);
                doc.text(categories[category], 15, yPosition);
                
                yPosition += 8;
                doc.setFontSize(12);
                doc.setTextColor(0, 0, 0);
                doc.text(component.name, 15, yPosition);
                
                yPosition += 6;
                doc.setFontSize(10);
                doc.setTextColor(80, 80, 80);
                doc.text(component.specs, 15, yPosition);
                
                yPosition += 6;
                doc.setFontSize(12);
                doc.setTextColor(0, 150, 0);
                doc.text(`R$ ${component.price.toFixed(2).replace('.', ',')}`, 15, yPosition);
                
                yPosition += 15;
            });
            
            // Total
            yPosition += 10;
            doc.setFontSize(16);
            doc.setTextColor(0, 100, 0);
            doc.text(`TOTAL: R$ ${totalPrice.toFixed(2).replace('.', ',')}`, 15, yPosition);
            
            const fileName = `orcamento-pc-simples-${new Date().toISOString().split('T')[0]}.pdf`;
            doc.save(fileName);
        }
        
        // Keep original text download as backup
        function downloadBudget() {
            const categories = {
                cpu: 'Processador',
                motherboard: 'Placa-m√£e',
                ram: 'Mem√≥ria RAM',
                storage: 'Armazenamento',
                gpu: 'Placa de V√≠deo',
                psu: 'Fonte',
                case: 'Gabinete'
            };
            
            let budgetText = '=== OR√áAMENTO DE PC ===\n\n';
            
            Object.entries(selectedComponents).forEach(([category, component]) => {
                budgetText += `${categories[category]}: ${component.name}\n`;
                budgetText += `Especifica√ß√µes: ${component.specs}\n`;
                budgetText += `Pre√ßo: R$ ${component.price.toFixed(2).replace('.', ',')}\n\n`;
            });
            
            budgetText += `TOTAL: R$ ${totalPrice.toFixed(2).replace('.', ',')}\n`;
            budgetText += `\nOr√ßamento gerado em: ${new Date().toLocaleString('pt-BR')}`;
            
            const blob = new Blob([budgetText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'orcamento-pc.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        // Share on WhatsApp
        function shareWhatsApp() {
            const categories = {
                cpu: 'Processador',
                motherboard: 'Placa-m√£e',
                ram: 'Mem√≥ria RAM',
                storage: 'Armazenamento',
                gpu: 'Placa de V√≠deo',
                psu: 'Fonte',
                case: 'Gabinete',
                monitor: 'Monitor',
                keyboard: 'Teclado',
                mouse: 'Mouse',
                headset: 'Headset'
            };
            
            let message = 'üñ•Ô∏è *OR√áAMENTO DE PC*\n\n';
            
            Object.entries(selectedComponents).forEach(([category, component]) => {
                message += `*${categories[category]}:* ${component.name}\n`;
                message += `R$ ${component.price.toFixed(2).replace('.', ',')}\n\n`;
            });
            
            message += `üí∞ *TOTAL: R$ ${totalPrice.toFixed(2).replace('.', ',')}*`;
            
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // Enter key for admin password
        document.getElementById('adminPassword').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkAdminPassword();
            }
        });

        // Initialize with complete data loading
        function initializeApp() {
            console.log('üöÄ Inicializando aplica√ß√£o...');
            
            // Load saved selections
            loadSelectedComponents();
            
            // Load products for current page
            loadProducts(currentPage);
            
            // Update progress and UI
            updateProgress();
            updateTotalPrice();
            
            // Create initial backup if none exists
            if (!localStorage.getItem('fullBackup')) {
                createBackup();
                console.log('üì¶ Backup inicial criado');
            }
            
            // Show data status in console
            const lastSaved = localStorage.getItem('lastSaved');
            const backupDate = localStorage.getItem('backupDate');
            
            if (lastSaved) {
                console.log('üíæ √öltimo salvamento:', new Date(lastSaved).toLocaleString('pt-BR'));
            }
            if (backupDate) {
                console.log('üîÑ √öltimo backup:', backupDate);
            }
            
            console.log('‚úÖ Aplica√ß√£o inicializada com sucesso!');
            console.log('üìä Produtos cadastrados:', Object.keys(products).reduce((total, cat) => total + products[cat].length, 0));
            console.log('üéØ Componentes selecionados:', Object.keys(selectedComponents).length);
        }

        // Auto-save every 30 seconds
        setInterval(() => {
            if (Object.keys(selectedComponents).length > 0) {
                saveSelectedComponents();
                console.log('üîÑ Auto-save realizado');
            }
        }, 30000);

        // Save data before page unload
        window.addEventListener('beforeunload', function() {
            saveSelectedComponents();
            createBackup();
        });

        // Customization functions
        function saveCustomization() {
            try {
                localStorage.setItem('siteCustomization', JSON.stringify(siteCustomization));
                console.log('‚úÖ Personaliza√ß√£o salva!');
            } catch (error) {
                console.error('‚ùå Erro ao salvar personaliza√ß√£o:', error);
            }
        }

        function loadCustomizationPanel() {
            // Load site info
            document.getElementById('customSiteTitle').value = siteCustomization.siteTitle;
            document.getElementById('customSiteSubtitle').value = siteCustomization.siteSubtitle;
            document.getElementById('customSiteLogo').value = siteCustomization.siteLogo;
            
            // Load first category
            loadCategoryCustomization();
        }

        function loadCategoryCustomization() {
            const category = document.getElementById('categorySelect').value;
            const categoryData = siteCustomization.categories[category];
            
            document.getElementById('categoryTitle').value = categoryData.title;
            document.getElementById('categoryDesc').value = categoryData.desc;
            document.getElementById('categoryBanner').value = categoryData.banner;
            document.getElementById('categoryBannerTitle').value = categoryData.bannerTitle;
            document.getElementById('categoryBannerDesc').value = categoryData.bannerDesc;
        }

        function saveCategoryCustomization() {
            const category = document.getElementById('categorySelect').value;
            
            siteCustomization.categories[category] = {
                title: document.getElementById('categoryTitle').value,
                desc: document.getElementById('categoryDesc').value,
                banner: document.getElementById('categoryBanner').value,
                bannerTitle: document.getElementById('categoryBannerTitle').value,
                bannerDesc: document.getElementById('categoryBannerDesc').value
            };
            
            saveCustomization();
            alert('‚úÖ Categoria salva! Clique em "Aplicar Todas as Personaliza√ß√µes" para ver as mudan√ßas.');
        }

        function saveAllCustomizations() {
            // Save site info
            siteCustomization.siteTitle = document.getElementById('customSiteTitle').value;
            siteCustomization.siteSubtitle = document.getElementById('customSiteSubtitle').value;
            siteCustomization.siteLogo = document.getElementById('customSiteLogo').value;
            
            // Save current category
            saveCategoryCustomization();
            
            // Apply changes
            applyCustomizations();
            
            alert('‚úÖ Todas as personaliza√ß√µes foram aplicadas com sucesso!');
            closeAdminPanel();
        }

        function applyCustomizations() {
            // Apply site info
            document.getElementById('siteTitle').textContent = siteCustomization.siteTitle;
            document.getElementById('siteSubtitle').textContent = siteCustomization.siteSubtitle;
            
            // Update logo
            const logoImg = document.querySelector('.site-logo');
            if (logoImg && siteCustomization.siteLogo) {
                logoImg.src = siteCustomization.siteLogo;
            }
            
            // Apply category customizations
            Object.entries(siteCustomization.categories).forEach(([category, data]) => {
                // Update titles and descriptions
                const titleElement = document.getElementById(category + 'Title');
                const descElement = document.getElementById(category + 'Desc');
                
                if (titleElement) titleElement.textContent = data.title;
                if (descElement) descElement.textContent = data.desc;
                
                // Update banners
                if (data.banner) {
                    const bannerContainer = document.getElementById(category + 'Banner');
                    const bannerImg = document.getElementById(category + 'BannerImg');
                    const bannerTitle = document.getElementById(category + 'BannerTitle');
                    const bannerDesc = document.getElementById(category + 'BannerDesc');
                    
                    if (bannerContainer && bannerImg) {
                        bannerImg.src = data.banner;
                        bannerContainer.classList.remove('hidden');
                        
                        if (bannerTitle) bannerTitle.textContent = data.bannerTitle;
                        if (bannerDesc) bannerDesc.textContent = data.bannerDesc;
                    }
                } else {
                    const bannerContainer = document.getElementById(category + 'Banner');
                    if (bannerContainer) {
                        bannerContainer.classList.add('hidden');
                    }
                }
            });
            
            saveCustomization();
        }

        // Game variables
        let gameScore = 0;
        let gameConnected = 0;
        let gameStartTime = null;
        let gameTimer = null;
        let draggedCable = null;
        let connectedCables = new Set();

        // Offline detection and game functions
        function checkConnection() {
            if (navigator.onLine) {
                document.getElementById('offlineGameModal').classList.add('hidden');
                document.getElementById('offlineGameModal').classList.remove('flex');
                alert('üéâ Internet conectada! Voc√™ pode continuar usando o site normalmente.');
            } else {
                alert('üì° Ainda sem internet. Continue jogando! üéÆ');
            }
        }

        function showOfflineGame() {
            document.getElementById('offlineGameModal').classList.remove('hidden');
            document.getElementById('offlineGameModal').classList.add('flex');
            resetGame();
        }

        function closeOfflineGame() {
            document.getElementById('offlineGameModal').classList.add('hidden');
            document.getElementById('offlineGameModal').classList.remove('flex');
            if (gameTimer) {
                clearInterval(gameTimer);
                gameTimer = null;
            }
        }

        function resetGame() {
            gameScore = 0;
            gameConnected = 0;
            gameStartTime = Date.now();
            connectedCables.clear();
            
            // Reset all cables to original positions
            const cables = ['power', 'usb', 'hdmi', 'audio', 'ethernet'];
            cables.forEach((type, index) => {
                const cable = document.getElementById(type + 'Cable');
                cable.style.left = '50px';
                cable.style.top = (50 + index * 50) + 'px';
                cable.classList.remove('connected');
                
                const port = document.getElementById(type + 'Port');
                port.classList.remove('connected');
            });
            
            updateGameStats();
            startGameTimer();
        }

        function startGameTimer() {
            if (gameTimer) clearInterval(gameTimer);
            
            gameTimer = setInterval(() => {
                const elapsed = Math.floor((Date.now() - gameStartTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('gameTime').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function updateGameStats() {
            document.getElementById('gameScore').textContent = gameScore;
            document.getElementById('gameConnected').textContent = `${gameConnected}/5`;
        }

        // Drag and drop functionality
        function initializeDragAndDrop() {
            const cables = document.querySelectorAll('.cable');
            const ports = document.querySelectorAll('.connection-point');
            
            cables.forEach(cable => {
                cable.addEventListener('mousedown', startDrag);
                cable.addEventListener('touchstart', startDrag);
            });
            
            document.addEventListener('mousemove', drag);
            document.addEventListener('touchmove', drag);
            document.addEventListener('mouseup', endDrag);
            document.addEventListener('touchend', endDrag);
        }

        function startDrag(e) {
            e.preventDefault();
            if (e.target.closest('.cable').classList.contains('connected')) return;
            
            draggedCable = e.target.closest('.cable');
            draggedCable.classList.add('dragging');
            
            // Highlight compatible ports
            const cableType = draggedCable.dataset.type;
            const compatiblePort = document.querySelector(`[data-cable="${cableType}"]`);
            if (compatiblePort) {
                compatiblePort.classList.add('highlight');
            }
        }

        function drag(e) {
            if (!draggedCable) return;
            e.preventDefault();
            
            const clientX = e.clientX || (e.touches && e.touches[0].clientX);
            const clientY = e.clientY || (e.touches && e.touches[0].clientY);
            
            if (clientX && clientY) {
                const gameArea = draggedCable.parentElement;
                const rect = gameArea.getBoundingClientRect();
                
                draggedCable.style.left = (clientX - rect.left - 50) + 'px';
                draggedCable.style.top = (clientY - rect.top - 20) + 'px';
            }
        }

        function endDrag(e) {
            if (!draggedCable) return;
            
            const cableType = draggedCable.dataset.type;
            const compatiblePort = document.querySelector(`[data-cable="${cableType}"]`);
            
            // Remove highlights
            document.querySelectorAll('.connection-point').forEach(port => {
                port.classList.remove('highlight');
            });
            
            // Check if cable is dropped on correct port
            const clientX = e.clientX || (e.changedTouches && e.changedTouches[0].clientX);
            const clientY = e.clientY || (e.changedTouches && e.changedTouches[0].clientY);
            
            if (clientX && clientY) {
                const elementBelow = document.elementFromPoint(clientX, clientY);
                const targetPort = elementBelow?.closest('.connection-point');
                
                if (targetPort && targetPort === compatiblePort && !connectedCables.has(cableType)) {
                    // Successful connection!
                    connectCable(draggedCable, targetPort, cableType);
                } else {
                    // Return to original position
                    returnCableToStart(draggedCable, cableType);
                }
            } else {
                returnCableToStart(draggedCable, cableType);
            }
            
            draggedCable.classList.remove('dragging');
            draggedCable = null;
        }

        function connectCable(cable, port, cableType) {
            // Position cable at port
            const portRect = port.getBoundingClientRect();
            const gameRect = cable.parentElement.getBoundingClientRect();
            
            cable.style.left = (portRect.left - gameRect.left - 10) + 'px';
            cable.style.top = (portRect.top - gameRect.top - 5) + 'px';
            
            // Mark as connected
            cable.classList.add('connected');
            port.classList.add('connected');
            connectedCables.add(cableType);
            
            // Update score
            gameScore += 100;
            gameConnected++;
            updateGameStats();
            
            // Check if game is complete
            if (gameConnected === 5) {
                setTimeout(() => {
                    const timeBonus = Math.max(0, 300 - Math.floor((Date.now() - gameStartTime) / 1000)) * 10;
                    gameScore += timeBonus;
                    updateGameStats();
                    
                    alert(`üéâ PARAB√âNS! Voc√™ conectou todos os cabos!\n\nüèÜ Pontua√ß√£o Final: ${gameScore}\n‚è±Ô∏è B√¥nus de Tempo: ${timeBonus}\n\nVoc√™ √© um expert em montagem de PC! üñ•Ô∏è‚ú®`);
                    
                    if (gameTimer) {
                        clearInterval(gameTimer);
                        gameTimer = null;
                    }
                }, 500);
            }
        }

        function returnCableToStart(cable, cableType) {
            const cables = ['power', 'usb', 'hdmi', 'audio', 'ethernet'];
            const index = cables.indexOf(cableType);
            
            cable.style.left = '50px';
            cable.style.top = (50 + index * 50) + 'px';
        }

        // Network status detection
        window.addEventListener('online', () => {
            console.log('üåê Internet conectada!');
        });

        window.addEventListener('offline', () => {
            console.log('üì° Internet desconectada - Mostrando jogo offline');
            setTimeout(() => {
                showOfflineGame();
            }, 1000);
        });

        // Check initial connection status
        function checkInitialConnection() {
            if (!navigator.onLine) {
                setTimeout(() => {
                    showOfflineGame();
                }, 2000);
            }
        }

        // Initialize app
        initializeApp();
        
        // Apply customizations on load
        setTimeout(() => {
            applyCustomizations();
        }, 100);
        
        // Initialize game
        setTimeout(() => {
            initializeDragAndDrop();
            checkInitialConnection();
        }, 500);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'969a889403b090a9',t:'MTc1NDI3MzU4NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
